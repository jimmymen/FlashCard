<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>飞机加油快速计算器 (自动单位)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f7f6;
            padding: 20px;
            max-width: 550px;
            margin: 0 auto;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h2 {
            color: #004a99;
            text-align: center;
            border-bottom: 2px solid #004a99;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-top: 20px;
            font-weight: bold;
            color: #333;
        }
        input[type="number"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
        }
        .input-group {
            display: flex;
            gap: 15px; /* Adds space between the two input boxes */
        }
        .input-wrapper {
            flex: 1; /* Each input takes up equal space */
        }
        .result-box {
            background-color: #e6f7ff;
            border: 2px solid #007bff;
            padding: 15px;
            margin-top: 30px;
            border-radius: 6px;
            text-align: center;
        }
        #resultVolume {
            font-size: 36px;
            font-weight: bold;
            color: #d9534f;
            display: block;
            margin-top: 5px;
        }
        .unit {
            font-size: 1.1em;
            color: #333;
            margin-left: 5px;
        }
        .note {
            font-size: 0.9em;
            color: #6a6a6a;
            margin-top: 20px;
            padding: 10px;
            border-left: 3px solid #17a2b8;
            background-color: #e7f7fa;
        }
    </style>
</head>
<body>

    <h2>✈️ 燃油快速计算器 (升)</h2>

    <!-- 目标总油量 -->
    <label>1. 所需目标总油量 (输入任意一个)</label>
    <div class="input-group">
        <div class="input-wrapper">
            <span class="unit">吨 (t)</span>
            <input type="number" id="requiredTons" value="15.0" step="0.1" oninput="handleInput('required', 'tons')">
        </div>
        <div class="input-wrapper">
            <span class="unit">磅 (lbs)</span>
            <input type="number" id="requiredPounds" step="100" oninput="handleInput('required', 'pounds')">
        </div>
    </div>

    <!-- 飞机剩余油量 -->
    <label>2. 飞机剩余油量 (输入任意一个)</label>
    <div class="input-group">
        <div class="input-wrapper">
            <span class="unit">吨 (t)</span>
            <input type="number" id="remainingTons" value="10.2" step="0.1" oninput="handleInput('remaining', 'tons')">
        </div>
        <div class="input-wrapper">
            <span class="unit">磅 (lbs)</span>
            <input type="number" id="remainingPounds" step="100" oninput="handleInput('remaining', 'pounds')">
        </div>
    </div>

    <!-- 结果显示 -->
    <div class="result-box">
        <label>所需加注体积 (最终结果):</label>
        <span id="resultVolume">0.00</span>
        <span class="unit">升 (L)</span>
    </div>

    <div class="note">
        **提示:** 燃油密度已固定为 <strong>0.8 kg/L</strong>。您只需在任意单位的输入框中填入数字，计算器将自动计算。
    </div>

    <script>
        // --- 全局常量 ---
        const POUNDS_PER_KG = 2.20462; // 1 kg ≈ 2.20462 lbs
        const KG_PER_TON = 1000;       // 1 ton = 1000 kg
        const DENSITY = 0.8;           // 固定的燃油密度 (kg/L)

        // --- 获取输入框元素 ---
        const requiredTonsInput = document.getElementById('requiredTons');
        const requiredPoundsInput = document.getElementById('requiredPounds');
        const remainingTonsInput = document.getElementById('remainingTons');
        const remainingPoundsInput = document.getElementById('remainingPounds');

        // --- 输入处理函数：当用户在一个框输入时，清空另一个框 ---
        function handleInput(type, unit) {
            if (type === 'required') {
                if (unit === 'tons') {
                    requiredPoundsInput.value = '';
                } else {
                    requiredTonsInput.value = '';
                }
            } else if (type === 'remaining') {
                if (unit === 'tons') {
                    remainingPoundsInput.value = '';
                } else {
                    remainingTonsInput.value = '';
                }
            }
            calculateFuel(); // 每次输入后都重新计算
        }

        // --- 主计算函数 ---
        function calculateFuel() {
            // 1. 获取目标油量并统一换算成千克 (kg)
            let requiredWeightKg = 0;
            const requiredTons = parseFloat(requiredTonsInput.value);
            const requiredPounds = parseFloat(requiredPoundsInput.value);

            if (!isNaN(requiredTons) && requiredTonsInput.value) {
                requiredWeightKg = requiredTons * KG_PER_TON;
            } else if (!isNaN(requiredPounds) && requiredPoundsInput.value) {
                requiredWeightKg = requiredPounds / POUNDS_PER_KG;
            }

            // 2. 获取剩余油量并统一换算成千克 (kg)
            let remainingWeightKg = 0;
            const remainingTons = parseFloat(remainingTonsInput.value);
            const remainingPounds = parseFloat(remainingPoundsInput.value);

            if (!isNaN(remainingTons) && remainingTonsInput.value) {
                remainingWeightKg = remainingTons * KG_PER_TON;
            } else if (!isNaN(remainingPounds) && remainingPoundsInput.value) {
                remainingWeightKg = remainingPounds / POUNDS_PER_KG;
            }

            // 3. 计算需要加注的净重量 (kg)
            let netWeightKg = requiredWeightKg - remainingWeightKg;
            if (netWeightKg < 0) {
                netWeightKg = 0; // 避免负数
            }

            // 4. 根据固定密度计算体积 (升)
            // 体积 (L) = 重量 (kg) / 密度 (kg/L)
            const resultVolume = netWeightKg / DENSITY;

            // 5. 显示最终结果
            document.getElementById('resultVolume').textContent = resultVolume.toFixed(2);
        }

        // --- 初始化：页面加载时执行一次计算 ---
        window.onload = function() {
            calculateFuel();
        };
    </script>

</body>
</html>
